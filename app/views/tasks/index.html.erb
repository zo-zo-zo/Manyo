<%= form_with( method: :get, local: true,url: tasks_path) do |form| %>
<%= form.label :title_search,"タイトル検索" %>
<%= form.text_field :title,class: 'form_control' %>

<%= form.label :status_search, "状態検索"%>
<%= form.select :status, [["未着手",0],["着手中",1],["完了",2]],include_blank: true, selected: '' %>
<%= hidden_field :search, value: 'true'%>
<%= form.submit '検索'%>
<% end %>
<h1><%=t('view.tasks_index')%></h1>
<p><%= notice %></p>
<table>
  <tr>
    <th><%=t('view.task_name')%></th>
    <th><%=t('view.task_detail')%></th>
    <th><%=t('view.task_deadline')%></th>
    <th><%=t('view.task_status')%></th>
    <th><%=t('view.task_priority')%></th>
  </tr>

<% @tasks.each do |task| %>
  <tr class = 'task_row'>
    <td><%= task.title %></td>
    <td><%= task.content %></td>
    <td><%= task.deadline %></td>
    <td><%= task.status %></td>
    <td><%= task.priority %></td>
    <td><%= task.created_at%></td>
    <td><%= link_to t('view.detail'), task_path(task.id),class:'btn btn-primary' %></td>
    <td><%= link_to t('view.edit'), edit_task_path(task.id) ,class:'btn btn-success', data: { confirm: '本当に編集していいですか？' } %></td>
    <td><%= link_to t('view.destroy'), task_path(task.id), method: :delete , class:'btn btn-danger',data: { confirm: '本当に削除していいですか？' }%></td>
  </tr>
<% end %>
<%= link_to t('view.new_task'), new_task_path ,class:'btn btn-warning'%>
<%= link_to "終了期限でソートする", tasks_path(sort_expired: "true") ,class:'btn btn-info'%>
<%= link_to "優先順位の高い順にソートする", tasks_path(sort_priority: "true"),class:'btn btn-info' %>
<%= paginate @tasks %>
</table>
